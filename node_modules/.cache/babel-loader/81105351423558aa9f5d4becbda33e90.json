{"ast":null,"code":"import * as constants from './actionTypes';\nimport { fromJS } from 'immutable';\nimport axios from 'axios';\n\nconst changeHomeList = data => ({\n  type: constants.CHANGE_TOPIC_LIST,\n  data\n});\n\nconst changMoreList = (data, nextPage) => ({\n  type: constants.CHANGE_MORE_LIST,\n  data: fromJS(data),\n  nextPage\n});\n\nconst changWriterList = data => ({\n  type: constants.CHANGE_WRITER_LIST,\n  totalPage: Math.ceil(data.length / 5),\n  data\n});\n\nexport const changeShowScroll = show => ({\n  type: constants.CHANGE_SHOW_TOP,\n  show\n});\nexport const changWriterPage = page => ({\n  type: constants.CHANGE_WRITER_PAGE,\n  page\n});\nexport const getHomeList = () => {\n  return dispatch => {\n    axios.get('/api/home.json').then(res => {\n      dispatch(changeHomeList(res.data.data));\n    }).catch(() => {\n      console.log('err');\n    });\n  };\n};\nexport const getMorelist = page => {\n  return dispatch => {\n    axios.get('api/homeList.json?page=' + page).then(res => {\n      // console.log(res.data.data.articleList)\n      dispatch(changMoreList(res.data.data.articleList, page + 1));\n    }).catch(() => {\n      console.log('err');\n    });\n  };\n};\nexport const getWriterJson = () => {\n  return dispatch => {\n    axios.get('api/writerList.json').then(res => {\n      // console.log(res.data);\n      dispatch(changWriterList(res.data.data));\n    }).catch(() => {\n      console.log('getWriterJsonErr');\n    });\n  };\n};","map":{"version":3,"sources":["D:\\Code\\react\\jianshu\\src\\pages\\home\\store\\actionCreators.js"],"names":["constants","fromJS","axios","changeHomeList","data","type","CHANGE_TOPIC_LIST","changMoreList","nextPage","CHANGE_MORE_LIST","changWriterList","CHANGE_WRITER_LIST","totalPage","Math","ceil","length","changeShowScroll","show","CHANGE_SHOW_TOP","changWriterPage","page","CHANGE_WRITER_PAGE","getHomeList","dispatch","get","then","res","catch","console","log","getMorelist","articleList","getWriterJson"],"mappings":"AAAA,OAAO,KAAKA,SAAZ,MAA2B,eAA3B;AACA,SAAQC,MAAR,QAAsB,WAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,cAAc,GAAIC,IAAD,KAAU;AAC7BC,EAAAA,IAAI,EAACL,SAAS,CAACM,iBADc;AAE7BF,EAAAA;AAF6B,CAAV,CAAvB;;AAKA,MAAMG,aAAa,GAAG,CAACH,IAAD,EAAMI,QAAN,MAAmB;AACrCH,EAAAA,IAAI,EAACL,SAAS,CAACS,gBADsB;AAErCL,EAAAA,IAAI,EAACH,MAAM,CAACG,IAAD,CAF0B;AAGrCI,EAAAA;AAHqC,CAAnB,CAAtB;;AAMA,MAAME,eAAe,GAAIN,IAAD,KAAU;AAC9BC,EAAAA,IAAI,EAACL,SAAS,CAACW,kBADe;AAE9BC,EAAAA,SAAS,EAACC,IAAI,CAACC,IAAL,CAAUV,IAAI,CAACW,MAAL,GAAY,CAAtB,CAFoB;AAG9BX,EAAAA;AAH8B,CAAV,CAAxB;;AAOA,OAAO,MAAMY,gBAAgB,GAAIC,IAAD,KAAU;AACtCZ,EAAAA,IAAI,EAACL,SAAS,CAACkB,eADuB;AAEtCD,EAAAA;AAFsC,CAAV,CAAzB;AAKP,OAAO,MAAME,eAAe,GAAIC,IAAD,KAAU;AACrCf,EAAAA,IAAI,EAACL,SAAS,CAACqB,kBADsB;AAErCD,EAAAA;AAFqC,CAAV,CAAxB;AAKP,OAAO,MAAME,WAAW,GAAG,MAAK;AAC5B,SAAQC,QAAD,IAAa;AAChBrB,IAAAA,KAAK,CAACsB,GAAN,CAAU,gBAAV,EAA4BC,IAA5B,CAAkCC,GAAD,IAAQ;AACrCH,MAAAA,QAAQ,CAACpB,cAAc,CAACuB,GAAG,CAACtB,IAAJ,CAASA,IAAV,CAAf,CAAR;AACH,KAFD,EAEGuB,KAFH,CAES,MAAK;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,KAJD;AAKH,GAND;AAOH,CARM;AAUP,OAAO,MAAMC,WAAW,GAAIV,IAAD,IAAS;AAChC,SAAOG,QAAD,IAAa;AACfrB,IAAAA,KAAK,CAACsB,GAAN,CAAU,4BAA2BJ,IAArC,EAA2CK,IAA3C,CAAiDC,GAAD,IAAQ;AACpD;AACAH,MAAAA,QAAQ,CAAChB,aAAa,CAACmB,GAAG,CAACtB,IAAJ,CAASA,IAAT,CAAc2B,WAAf,EAA2BX,IAAI,GAAC,CAAhC,CAAd,CAAR;AACH,KAHD,EAGGO,KAHH,CAGS,MAAK;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,KALD;AAMH,GAPD;AAQH,CATM;AAWP,OAAO,MAAMG,aAAa,GAAG,MAAK;AAC9B,SAAOT,QAAD,IAAa;AACfrB,IAAAA,KAAK,CAACsB,GAAN,CAAU,qBAAV,EAAiCC,IAAjC,CAAuCC,GAAD,IAAQ;AAC1C;AACAH,MAAAA,QAAQ,CAACb,eAAe,CAACgB,GAAG,CAACtB,IAAJ,CAASA,IAAV,CAAhB,CAAR;AACH,KAHD,EAGGuB,KAHH,CAGS,MAAK;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH,KALD;AAMH,GAPD;AAQH,CATM","sourcesContent":["import * as constants from './actionTypes';\r\nimport {fromJS} from  'immutable';\r\nimport axios from 'axios';\r\n\r\nconst changeHomeList = (data) =>({\r\n    type:constants.CHANGE_TOPIC_LIST,\r\n    data\r\n})\r\n\r\nconst changMoreList = (data,nextPage) =>({\r\n    type:constants.CHANGE_MORE_LIST,\r\n    data:fromJS(data),\r\n    nextPage\r\n})\r\n\r\nconst changWriterList = (data) =>({\r\n    type:constants.CHANGE_WRITER_LIST,\r\n    totalPage:Math.ceil(data.length/5),\r\n    data\r\n\r\n})\r\n\r\nexport const changeShowScroll = (show) =>({\r\n    type:constants.CHANGE_SHOW_TOP,\r\n    show\r\n})\r\n\r\nexport const changWriterPage = (page) =>({\r\n    type:constants.CHANGE_WRITER_PAGE,\r\n    page\r\n})\r\n\r\nexport const getHomeList = () =>{\r\n    return (dispatch) =>{\r\n        axios.get('/api/home.json').then((res) =>{\r\n            dispatch(changeHomeList(res.data.data))\r\n        }).catch(() =>{\r\n            console.log('err')\r\n        })\r\n    }\r\n}\r\n\r\nexport const getMorelist = (page) =>{\r\n    return(dispatch) =>{\r\n        axios.get('api/homeList.json?page='+ page).then((res) =>{\r\n            // console.log(res.data.data.articleList)\r\n            dispatch(changMoreList(res.data.data.articleList,page+1))\r\n        }).catch(() =>{\r\n            console.log('err')\r\n        })\r\n    }\r\n}\r\n\r\nexport const getWriterJson = () =>{\r\n    return(dispatch) =>{\r\n        axios.get('api/writerList.json').then((res) =>{\r\n            // console.log(res.data);\r\n            dispatch(changWriterList(res.data.data))\r\n        }).catch(() =>{\r\n            console.log('getWriterJsonErr')\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}